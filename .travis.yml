language: java
jdk:
- oraclejdk8
deploy:
# Bintray release
- provider: script
  script: TERM=dumb ./gradlew --info -PdryRun=false -PbintrayUser="${BINTRAY_USER}" -PbintrayApiKey="${BINTRAY_API_KEY}" bintrayUpload
  skip_cleanup: true
  on:
    repo: rundeck/rundeck-oracle-dialect
    tags: true
# Snapshots
- provider: script
  script: TERM=dumb ./gradlew --info -PsonatypeUsername="${SONATYPE_USER}" -PsonatypePassword="${SONATYPE_PASSWORD}" uploadArchives
  skip_cleanup: true
  on:
    repo: rundeck/rundeck-oracle-dialect
    branch: master
    tags: false